<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard - Checkout</title>
  <link rel="stylesheet" href="styles/dashboard.css" />
</head>

<body id="root">
  <header>
    <div class="logo">
      <img src="images/logo.png" />
    </div>

    <div class="navbar">
      <ul class="nav-links">
        <li class="nav-link nav-active">
          <a href="#">Heti menü rendelés</a>
        </li>
        <li class="nav-link">
          <a href="#">Rendelések</a>
        </li>
        <li class="nav-link">
          <a href="#">Pénzügyek</a>
        </li>
        <li class="nav-link">
          <a href="#">Tudnivalók</a>
        </li>
      </ul>

      <div class="nav-items">
        <div class="profile">
          <a href="#">
            <img src="images/profile.png" />
            <span>Fiókom</span>
          </a>
        </div>
        <div class="mobile-nav">
          <button class="mobile-nav-hamburger"></button>
        </div>
        <div class="nav-cart">
          <a href="#">
            <img src="images/cart.png" />
            <div class="cart-items">
              <span>6</span>
            </div>
          </a>
        </div>
      </div>
    </div>
  </header>

  <div class="mobile-header-nav hidden">
    <div class="logo">
      <img src="images/logo.png" />
    </div>

    <div class="navbar">
      <ul class="nav-links">
        <li class="nav-link nav-active">
          <a href="#">Főoldal</a>
        </li>
        <li class="nav-link">
          <a href="#">Heti menü rendelés</a>
        </li>
        <li class="nav-link">
          <a href="#">Rendelések</a>
        </li>
        <li class="nav-link">
          <a href="#">Pénzügyek</a>
        </li>
        <li class="nav-link">
          <a href="#">Tudnivalók</a>
        </li>
      </ul>

      <div class="nav-items">
        <div class="profile">
          <a href="#">
            <span>Fiókom</span>
          </a>
        </div>

        <div class="logout">
          <a href="#">
            <span>Kijelentkezés</span>
          </a>
        </div>
      </div>
    </div>
  </div>
  <div class="mobile-header-nav-overlay hidden"></div>

  <div class="checkout-bg">
    <div class="checkout-container">
      <div class="checkout-header">
        <h1>Rendelés összegzése</h1>
        <div class="checkout-timer">
          <span class="timer-text">A keddi rendelés határideje hamarosan lejár:</span>
          <div class="timer-display">23:46</div>
        </div>
      </div>

      <div class="checkout-content">
        <div class="checkout-left">
          <!-- Coupon Section -->
          <div class="checkout-section">
            <div class="section-header">
              <h2>Kuponkód</h2>
            </div>
            <div class="coupon-input-container">
              <input type="text" placeholder="Kuponkód" class="coupon-input" />
              <button class="coupon-apply-btn">Beváltás</button>
            </div>
          </div>

          <!-- Points Section -->
          <div class="checkout-section">
            <div class="section-header">
              <h2>Pontgyűjtés beváltás</h2>
            </div>
            <div class="points-options">
              <div class="points-option">
                <input type="radio" id="points_1430" name="points" value="1430" />
                <label for="points_1430">Beváltom: 1430 Ft</label>
              </div>
              <div class="points-option">
                <input type="radio" id="points_none" name="points" value="none" checked />
                <label for="points_none">Nem váltom be</label>
              </div>
            </div>
          </div>

          <!-- Payment Method Section -->
          <div class="checkout-section">
            <div class="section-header">
              <div class="section-content">
                <h2>Fizetési mód</h2>
                <p class="section-description">A minimum kártyás fizetés összege 200 Ft. A többlet befizetest késöbbi
                  rendeléseinek felhasználható.</p>
              </div>
            </div>
            <div class="payment-methods">
              <div class="payment-method">
                <input type="radio" id="card" name="payment" value="card" checked />
                <label for="card">Bankkártyás fizetés</label>
              </div>
              <div class="payment-method">
                <input type="radio" id="transfer" name="payment" value="transfer" />
                <label for="transfer">Banki átutalás</label>
              </div>
            </div>
          </div>

          <!-- Tips Section -->
          <div class="checkout-section">
            <div class="section-header">
              <div class="section-content">
                <h2>Borraváló</h2>
                <p class="section-description">A borravalót futárok és szakácsok között egyenlően kerül elosztásra. A
                  borraváló csak kártyával fizethető.</p>
              </div>
            </div>
            <div class="tip-options">
              <div class="tip-option">
                <input type="radio" id="tip_none" name="tip" value="none" checked />
                <label for="tip_none">Most nem adok</label>
              </div>
              <div class="tip-option">
                <input type="radio" id="tip_5" name="tip" value="5" />
                <label for="tip_5">5%</label>
              </div>
              <div class="tip-option">
                <input type="radio" id="tip_10" name="tip" value="10" />
                <label for="tip_10">10%</label>
              </div>
              <div class="tip-option">
                <input type="radio" id="tip_custom" name="tip" value="custom" />
                <label for="tip_custom">Egyedi érték</label>
              </div>
            </div>
            <div class="custom-tip-input hidden">
              <input type="number" id="custom_tip_amount" placeholder="Összeg" min="0" step="1" />
              <span class="currency">Ft</span>
            </div>
          </div>
        </div>

        <div class="checkout-right">
          <div class="order-summary">
            <div class="summary-row">
              <span class="summary-label">Rendelés összege</span>
              <span class="summary-value">23 927 Ft</span>
            </div>

            <div class="summary-row">
              <span class="summary-label">Kedvezmény</span>
              <div class="summary-discount">
                <span class="discount-percent">10%</span>
                <span class="summary-value">-813 Ft</span>
              </div>
            </div>

            <div class="summary-row">
              <span class="summary-label">Első megrendelés kedvezmény</span>
              <div class="summary-discount">
                <span class="discount-percent">15%</span>
                <span class="summary-value">-927 Ft</span>
              </div>
            </div>

            <div class="summary-row">
              <span class="summary-label">Pontgyűjtés beváltás</span>
              <span class="summary-value">-1430 Ft</span>
            </div>

            <div class="summary-row">
              <span class="summary-label">Vasárnapi szállítás díj visszatérítés</span>
              <span class="summary-value">-700 Ft</span>
            </div>

            <div class="summary-row">
              <span class="summary-label">Hétfői szállítás</span>
              <span class="summary-value">800 Ft</span>
            </div>

            <div class="summary-row">
              <span class="summary-label">Szerdai szállítás</span>
              <span class="summary-value">500 Ft</span>
            </div>

            <div class="summary-total">
              <div class="total-row">
                <span class="total-label">Fizetendő</span>
                <div class="total-amounts">
                  <span class="total-value">18 400 Ft</span>
                  <span class="original-total">24 524 Ft</span>
                </div>
              </div>
            </div>

            <!-- Bank Card Payment Selection -->
            <div class="bank-payment-section hidden">
              <h3>Bankkártyás fizetés</h3>

              <div class="saved-card">
                <div class="card-icon"></div>
                <span class="card-info">Kovács Kolos</span>
                <span class="card-number">•••• 4242 (12/2027)</span>
              </div>

              <button class="add-new-card-btn">
                <span class="plus-icon">+</span>
                <span>Új bankkártya hozzáadása</span>
              </button>

              <!-- New Card Form -->
              <div class="new-card-form hidden">
                <div class="form-group">
                  <label for="card_name">Kártyára írt név</label>
                  <input type="text" id="card_name" placeholder="Takács Tihamér" />
                </div>

                <div class="form-group">
                  <label for="card_number">Kártyaszám</label>
                  <input type="text" id="card_number" placeholder="1234 1234 1234 1234" maxlength="19" />
                </div>

                <div class="form-group">
                  <label for="card_holder">Kártyán szereplő név</label>
                  <input type="text" id="card_holder" placeholder="Név" />
                </div>

                <div class="form-row">
                  <div class="form-group half">
                    <label for="expiry_date">Lejárati dátum</label>
                    <input type="text" id="expiry_date" placeholder="MM/YY" maxlength="5" />
                  </div>

                  <div class="form-group half">
                    <label for="security_code">Biztonsági kód</label>
                    <input type="text" id="security_code" placeholder="123" maxlength="3" />
                  </div>
                </div>

                <div class="save-card-checkbox">
                  <input type="checkbox" id="save_card" />
                  <label for="save_card">Bankkártya mentése</label>
                </div>

                <div class="payment-providers">
                  <button class="provider-button" type="button">
                    <img src="images/google-pay.png" alt="Google Pay" />
                  </button>
                  <button class="provider-button" type="button">
                    <img src="images/apple-pay.png" alt="Apple Pay" />
                  </button>
                  <img src="images/stripe.png" alt="Stripe" class="stripe-logo" />
                </div>
              </div>
            </div>

            <button class="payment-btn">Fizetés</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const mobileCartDetailsBtn = document.querySelector(
      ".mobile-details-link"
    );
    const mobileCartDetailsDiv = document.querySelector(".cart-summary-sub");
    const mobileDetailsText = document.querySelector(".details-text");
    const mobileDetailsArrow = document.querySelector(".details-arrow");
    const mobileHamburgerBtn = document.querySelector(
      ".mobile-nav-hamburger"
    );
    const mobileHeaderNav = document.querySelector(".mobile-header-nav");
    const mobileHeaderNavOverlay = document.querySelector(
      ".mobile-header-nav-overlay"
    );
    const rootElement = document.querySelector("#root");

    // Custom tip input functionality
    const tipRadios = document.querySelectorAll('input[name="tip"]');
    const customTipInput = document.querySelector('.custom-tip-input');
    const customTipAmountInput = document.getElementById('custom_tip_amount');

    tipRadios.forEach(radio => {
      radio.addEventListener('change', function () {
        if (this.value === 'custom') {
          customTipInput.classList.remove('hidden');
          customTipAmountInput.focus();
        } else {
          customTipInput.classList.add('hidden');
          customTipAmountInput.value = '';
        }
      });
    });

    // Bank payment functionality
    const paymentRadios = document.querySelectorAll('input[name="payment"]');
    const bankPaymentSection = document.querySelector('.bank-payment-section');
    const addNewCardBtn = document.querySelector('.add-new-card-btn');
    const newCardForm = document.querySelector('.new-card-form');
    const cardNumberInput = document.getElementById('card_number');
    const expiryDateInput = document.getElementById('expiry_date');

    // Show/hide bank payment section
    paymentRadios.forEach(radio => {
      radio.addEventListener('change', function () {
        if (this.value === 'card') {
          bankPaymentSection.classList.remove('hidden');
        } else {
          bankPaymentSection.classList.add('hidden');
          newCardForm.classList.add('hidden');
        }
      });
    });

    // Show/hide new card form
    if (addNewCardBtn) {
      addNewCardBtn.addEventListener('click', function () {
        if (newCardForm.classList.contains('hidden')) {
          newCardForm.classList.remove('hidden');
          document.getElementById('card_name').focus();
        } else {
          newCardForm.classList.add('hidden');
        }
      });
    }

    // Format card number input
    if (cardNumberInput) {
      cardNumberInput.addEventListener('input', function (e) {
        let value = e.target.value.replace(/\s/g, '').replace(/[^0-9]/gi, '');
        let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
        if (formattedValue.length > 19) formattedValue = formattedValue.substring(0, 19);
        e.target.value = formattedValue;
      });
    }

    // Format expiry date input
    if (expiryDateInput) {
      expiryDateInput.addEventListener('input', function (e) {
        let value = e.target.value.replace(/\D/g, '');
        if (value.length >= 2) {
          value = value.substring(0, 2) + '/' + value.substring(2, 4);
        }
        e.target.value = value;
      });
    }

    // Initialize bank payment section visibility
    const cardRadio = document.getElementById('card');
    if (cardRadio && cardRadio.checked) {
      bankPaymentSection.classList.remove('hidden');
    }

    // Existing code
    const responsive = () => {
      console.log("responsive");
      if (window.innerWidth < 450) {
        if (mobileCartDetailsDiv) {
          mobileCartDetailsDiv.classList.add("hidden");
        }
      }
    };

    if (rootElement) {
      rootElement.addEventListener("loaded", responsive());
    }

    if (mobileCartDetailsBtn) {
      mobileCartDetailsBtn.addEventListener("click", function () {
        console.log("details");
        if (mobileCartDetailsDiv.classList.contains("hidden")) {
          mobileCartDetailsDiv.classList.remove("hidden");
          mobileDetailsText.textContent = "Részletek elrejtése";
          mobileDetailsArrow.style.backgroundImage =
            "url('./images/details-arrow-down.png')";
        } else {
          mobileCartDetailsDiv.classList.add("hidden");
          mobileDetailsText.textContent = "Megrendelés részletei";
          mobileDetailsArrow.style.backgroundImage =
            'url("./images/mobile-details-arrow.png")';
        }
      });
    }

    if (mobileHamburgerBtn) {
      mobileHamburgerBtn.addEventListener("click", function () {
        if (mobileHeaderNav.classList.contains("hidden")) {
          mobileHeaderNav.classList.remove("hidden");
        } else {
          mobileHeaderNav.classList.add("hidden");
        }

        if (mobileHeaderNavOverlay.classList.contains("hidden")) {
          mobileHeaderNavOverlay.classList.remove("hidden");
        } else {
          mobileHeaderNavOverlay.classList.add("hidden");
        }
      });
    }

    if (mobileHeaderNavOverlay) {
      mobileHeaderNavOverlay.addEventListener("click", function () {
        if (mobileHeaderNav.classList.contains("hidden")) {
          mobileHeaderNav.classList.remove("hidden");
        } else {
          mobileHeaderNav.classList.add("hidden");
        }

        if (mobileHeaderNavOverlay.classList.contains("hidden")) {
          mobileHeaderNavOverlay.classList.remove("hidden");
        } else {
          mobileHeaderNavOverlay.classList.add("hidden");
        }
      });
    }
  </script>
</body>

</html>